import type { Insight } from '../types';

// WellBefore AI-generated insights
export const wellBeforeInsights: Insight[] = [
  {
    id: 'wb-1',
    type: 'warning',
    title: 'CAC Spiked 9.3% This Month',
    description: 'Customer acquisition cost rose from $16.85 to $18.42. Meta CPM increased 12% while conversion stayed flat. Consider pausing underperforming ad sets.',
    metric: 'CAC',
    action: 'Review Meta ad performance in Ads Manager',
    owner: 'Marketing',
    timestamp: new Date(Date.now() - 1000 * 60 * 30), // 30 min ago
  },
  {
    id: 'wb-2',
    type: 'critical',
    title: 'N95 Respirators Stockout in 8 Days',
    description: 'Current velocity: 56 units/day. Only 450 units remaining. This SKU drives 15.6% of revenue. Expedite PO or risk $4,800/day in lost sales.',
    metric: 'Inventory',
    action: 'Contact supplier for rush order',
    owner: 'Operations',
    timestamp: new Date(Date.now() - 1000 * 60 * 45),
  },
  {
    id: 'wb-3',
    type: 'success',
    title: 'Email Channel Crushing It',
    description: 'Klaviyo ROAS at 30x vs 3x for paid. Email drove $84K this month on just $2.8K spend. Consider increasing email frequency from 3x to 4x weekly.',
    metric: 'Email Revenue',
    action: 'Schedule additional email campaign',
    owner: 'Marketing',
    timestamp: new Date(Date.now() - 1000 * 60 * 60),
  },
  {
    id: 'wb-4',
    type: 'warning',
    title: 'Gross Margin Slipping',
    description: 'GM dropped from 43.2% to 42.5% month-over-month. Shipping costs up 6% and return rate on Pulse Oximeters at 4.5%. Review supplier pricing.',
    metric: 'Gross Margin',
    action: 'Analyze COGS by SKU',
    owner: 'Finance',
    timestamp: new Date(Date.now() - 1000 * 60 * 90),
  },
  {
    id: 'wb-5',
    type: 'success',
    title: 'Repeat Rate Hits 31.2%',
    description: 'Best month ever for repeat purchases. December cohort showing 34% repeat rate at 30 days. Subscription program launch may be driving this.',
    metric: 'Repeat Rate',
    action: 'Continue subscription promotion',
    owner: 'CX',
    timestamp: new Date(Date.now() - 1000 * 60 * 120),
  },
  {
    id: 'wb-6',
    type: 'info',
    title: 'Revenue Pacing at 92% to Target',
    description: '$847K of $920K monthly goal with 27% of month remaining. Need $10.9K/day avg to hit target vs current $9.8K/day run rate.',
    metric: 'Revenue',
    action: 'Consider flash sale to close gap',
    owner: 'Marketing',
    timestamp: new Date(Date.now() - 1000 * 60 * 180),
  },
  {
    id: 'wb-7',
    type: 'warning',
    title: 'Dead Stock Tying Up $17.2K',
    description: '3 SKUs with 150+ days inventory. Face shields, gowns, and old thermometers. Consider liquidation or donation for tax benefit.',
    metric: 'Inventory',
    action: 'Create liquidation plan',
    owner: 'Operations',
    timestamp: new Date(Date.now() - 1000 * 60 * 240),
  },
];

// D2C Builders AI-generated insights
export const d2cBuildersInsights: Insight[] = [
  {
    id: 'd2c-1',
    type: 'critical',
    title: 'GourmetSnacks Profitability Crisis',
    description: 'Client margin at 18.5%, down from 24% last month. Labor hours 25% over estimate due to complex kitting requirements. Need to renegotiate or fire client.',
    metric: 'Client Margin',
    action: 'Schedule client review call',
    owner: 'Account Management',
    timestamp: new Date(Date.now() - 1000 * 60 * 20),
  },
  {
    id: 'd2c-2',
    type: 'warning',
    title: 'Error Rate Up 10.5%',
    description: 'Pick errors increased from 0.38% to 0.42%. TechAccessories and HomeEssentials account for 60% of errors. Training needed for new hires.',
    metric: 'Error Rate',
    action: 'Review error logs and schedule training',
    owner: 'Warehouse Manager',
    timestamp: new Date(Date.now() - 1000 * 60 * 45),
  },
  {
    id: 'd2c-3',
    type: 'success',
    title: 'BeautyBox Co Margin at 34.5%',
    description: 'Best performing client by margin. Simple SKU mix and consistent volume. Template for ideal client profile.',
    metric: 'Client Margin',
    action: 'Use as case study for sales',
    owner: 'Sales',
    timestamp: new Date(Date.now() - 1000 * 60 * 60),
  },
  {
    id: 'd2c-4',
    type: 'warning',
    title: 'Client Concentration Risk',
    description: 'Top client (FitGear Pro) is 22.9% of revenue. If they churned, would lose $38.5K/month. Prioritize diversification.',
    metric: 'Concentration',
    action: 'Accelerate new client acquisition',
    owner: 'Sales',
    timestamp: new Date(Date.now() - 1000 * 60 * 90),
  },
  {
    id: 'd2c-5',
    type: 'warning',
    title: 'Shipping Margin Compression',
    description: 'Shipping markup margin down from 19.1% to 18.2%. Carrier rate increases not fully passed through. Review pricing.',
    metric: 'Shipping Margin',
    action: 'Audit carrier contracts and client rates',
    owner: 'Operations',
    timestamp: new Date(Date.now() - 1000 * 60 * 120),
  },
  {
    id: 'd2c-6',
    type: 'success',
    title: 'Warehouse Utilization Up 5.8%',
    description: 'Now at 78.5% capacity utilization, up from 74.2%. Good sign for storage revenue without needing expansion.',
    metric: 'Utilization',
    action: 'Monitor for 85% threshold',
    owner: 'Operations',
    timestamp: new Date(Date.now() - 1000 * 60 * 180),
  },
  {
    id: 'd2c-7',
    type: 'info',
    title: '3 Clients in Pipeline',
    description: 'HealthyHarvest (75% close probability, $15K MRR), ModernHome (40%, $22K), SportsNutrition (20%, $28K). Weighted pipeline: $23.7K.',
    metric: 'Pipeline',
    action: 'Follow up on HealthyHarvest proposal',
    owner: 'Sales',
    timestamp: new Date(Date.now() - 1000 * 60 * 240),
  },
  {
    id: 'd2c-8',
    type: 'warning',
    title: 'HomeEssentials Volume Down 15%',
    description: 'Monthly order volume declining for 3 consecutive months. May indicate broader business issues. Risk of churn.',
    metric: 'Client Health',
    action: 'Schedule check-in call with client',
    owner: 'Account Management',
    timestamp: new Date(Date.now() - 1000 * 60 * 300),
  },
];

// Combined portfolio insights
export const portfolioInsights: Insight[] = [
  {
    id: 'port-1',
    type: 'success',
    title: 'Combined Monthly Revenue +5.2%',
    description: 'Emagineer portfolio at $1.016M MTD vs $965K last month. Both companies contributing to growth.',
    metric: 'Portfolio Revenue',
    action: 'Continue execution',
    owner: 'CEO',
    timestamp: new Date(Date.now() - 1000 * 60 * 30),
  },
  {
    id: 'port-2',
    type: 'info',
    title: 'Cash Position: $1.24M',
    description: 'Combined cash across both entities. 14+ months runway at current burn. Consider growth investment.',
    metric: 'Cash',
    action: 'Review capital allocation strategy',
    owner: 'CFO',
    timestamp: new Date(Date.now() - 1000 * 60 * 60),
  },
  {
    id: 'port-3',
    type: 'warning',
    title: '2 Critical Issues Require Attention',
    description: 'N95 stockout risk at WellBefore and GourmetSnacks profitability at D2C Builders. Both need immediate action.',
    metric: 'Alerts',
    action: 'Address in daily standup',
    owner: 'CEO',
    timestamp: new Date(Date.now() - 1000 * 60 * 15),
  },
];

// Get severity count
export const getInsightCounts = (insights: Insight[]) => ({
  critical: insights.filter((i) => i.type === 'critical').length,
  warning: insights.filter((i) => i.type === 'warning').length,
  success: insights.filter((i) => i.type === 'success').length,
  info: insights.filter((i) => i.type === 'info').length,
});
